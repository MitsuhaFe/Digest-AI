# ⚡ 快速修复指南 - 立即执行

## 🎯 版本：v0.2.1（增强调试）

---

## 🚀 5 步快速修复（5 分钟）

### 1️⃣ 卸载扩展
```
chrome://extensions/ → 找到 Digest AI → 移除
```

### 2️⃣ 清除缓存
```
Ctrl + Shift + Delete → 选择"过去1小时" → 清除数据
```

### 3️⃣ 关闭 Bilibili 页面
```
关闭所有 bilibili.com 标签页
```

### 4️⃣ 重新加载扩展
```
chrome://extensions/
→ 开启"开发者模式"
→ 加载已解压的扩展程序
→ 选择: D:\CodeProject\PBL2\Digest AI\dist
→ 确认版本: 0.2.1 ✅
```

### 5️⃣ 重启 Chrome
```
完全关闭 Chrome → 等待 5 秒 → 重新打开
```

---

## 🧪 验证测试（关键！）

### 步骤 1：打开 Bilibili 视频

访问任意 Bilibili 视频，例如：
```
https://www.bilibili.com/video/BV1xx411c7mD
```

### 步骤 2：打开控制台

```
按 F12 → 切换到 "Console" 标签
```

### 步骤 3：查看加载日志

**✅ 应该看到（成功）：**
```
🎬 Bilibili适配器脚本开始加载...
📁 当前URL: https://www.bilibili.com/video/...
⏰ 加载时间: 2025-10-27T...
✅ BilibiliAdapter 已成功导出到 window 对象
🔍 验证: typeof window.BilibiliAdapter = function
```

**❌ 如果没有看到这些日志：**
→ 适配器未加载，查看详细诊断

### 步骤 4：手动验证

在控制台输入：
```javascript
typeof BilibiliAdapter
```

**预期输出：**
```
"function"
```

### 步骤 5：测试保存

```
1. 保持控制台打开
2. 点击 Digest AI 扩展图标
3. 点击"保存"按钮
4. 观察控制台日志
```

**✅ 应该看到：**
```
🔍 检查 BilibiliAdapter 是否已加载...
✅ BilibiliAdapter 已成功加载
🎬 开始使用 BilibiliAdapter 提取视频内容...
🎬 开始提取 Bilibili 视频内容...
📊 Bilibili视频信息: {...}
💬 尝试获取热门评论...
✅ 成功获取评论: 10 条
🎉 内容提取完成！
```

**❌ 不应该看到：**
```
Bilibili适配器加载超时
```

---

## 🎉 成功标志

- ✅ 控制台有 "🎬 Bilibili适配器脚本开始加载..."
- ✅ `typeof BilibiliAdapter` 返回 `"function"`
- ✅ 点击保存后成功提取内容
- ✅ 能在阅读库看到视频摘要

---

## 🐛 如果仍然失败

### 情况 A：控制台没有任何适配器日志

**说明：** bilibili-adapter.js 未被注入

**检查：**
```powershell
# 在命令行运行：
cd "D:\CodeProject\PBL2\Digest AI\dist"
Test-Path "scripts\media\bilibili-adapter.js"
# 应该返回: True
```

**如果返回 False：**
```powershell
# 重新复制文件：
cd "D:\CodeProject\PBL2\Digest AI"
Copy-Item "scripts\media\bilibili-adapter.js" -Destination "dist\scripts\media\" -Force
```

### 情况 B：有加载日志，但没有导出成功日志

**说明：** 脚本执行中断

**检查：**
- 控制台是否有红色错误
- bilibili-adapter.js 文件是否完整

### 情况 C：点击保存时超时

**说明：** 等待适配器加载超过 5 秒

**可能原因：**
1. 适配器实际未加载（回到情况 A）
2. 脚本注入顺序问题
3. Chrome 缓存问题（重复第 1-5 步）

---

## 📞 获取帮助

如果以上都无效，请提供以下信息：

1. **扩展版本：** chrome://extensions/ 中显示的版本号
2. **控制台完整日志：** 按 F12 → Console → 复制所有内容
3. **错误截图：** chrome://extensions/ → Digest AI → 详细信息 → 底部"错误"部分

---

## 📚 详细文档

如需深入诊断，请查看：
- 📖 `调试指南-Bilibili适配器.md` - 完整诊断流程
- 📖 `清除缓存-必读.md` - 缓存清理详解

---

## ✨ v0.2.1 新特性

1. **详细加载日志** - 可以清楚看到适配器是否加载
2. **延长超时时间** - 从 3 秒增加到 5 秒
3. **详细错误提示** - 超时时提供检查清单
4. **导出验证** - 确认 BilibiliAdapter 成功导出到 window

---

**现在就开始吧！🚀**

按照 5 个步骤操作，然后查看控制台日志！

