(()=>{const e={light:{"--bg-primary":"#ffffff","--bg-secondary":"#f5f7fa","--bg-tertiary":"#fafafa","--text-primary":"#1f2937","--text-secondary":"#4b5563","--text-tertiary":"#6b7280","--border-color":"#e5e7eb","--border-light":"#f3f4f6","--gradient-start":"#667eea","--gradient-end":"#764ba2","--shadow":"rgba(0, 0, 0, 0.1)","--ai-bg":"linear-gradient(135deg, #f0f4ff 0%, #faf5ff 100%)"},dark:{"--bg-primary":"#1f2937","--bg-secondary":"#111827","--bg-tertiary":"#0f172a","--text-primary":"#f9fafb","--text-secondary":"#e5e7eb","--text-tertiary":"#d1d5db","--border-color":"#374151","--border-light":"#4b5563","--gradient-start":"#667eea","--gradient-end":"#764ba2","--shadow":"rgba(0, 0, 0, 0.3)","--ai-bg":"linear-gradient(135deg, #1e293b 0%, #312e81 100%)"}};function t(t){let a=t;"auto"===t&&(a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");const r=e[a]||e.light,o=document.documentElement;Object.entries(r).forEach(([e,t])=>{o.style.setProperty(e,t)}),document.body.classList.remove("theme-light","theme-dark"),document.body.classList.add(`theme-${a}`)}async function a(e,a=!0){if(t(e),a){let t=e;"auto"===e&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");try{await chrome.storage.local.set({theme:e,appliedTheme:t})}catch(e){console.error("保存主题设置失败:",e)}}}"undefined"!=typeof window&&(window.applyTheme=a,window.applyThemeStyles=t,window.loadSavedTheme=async function(){try{const{theme:e}=await chrome.storage.local.get(["theme"]),t=e||"light";await a(t)}catch(e){console.error("加载主题失败:",e),await a("light")}},window.watchSystemTheme=function(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",async e=>{const{theme:t}=await chrome.storage.local.get(["theme"]);"auto"===t&&await a("auto")})})})();