{"version":3,"file":"theme.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://digest-ai-extension/./scripts/theme.js"],"sourcesContent":["/**\r\n * 主题管理模块\r\n * 处理亮色/暗色主题切换\r\n */\r\n\r\n// 主题配置\r\nconst THEMES = {\r\n  light: {\r\n    '--bg-primary': '#ffffff',\r\n    '--bg-secondary': '#f5f7fa',\r\n    '--bg-tertiary': '#fafafa',\r\n    '--text-primary': '#1f2937',\r\n    '--text-secondary': '#4b5563',\r\n    '--text-tertiary': '#6b7280',\r\n    '--border-color': '#e5e7eb',\r\n    '--border-light': '#f3f4f6',\r\n    '--gradient-start': '#667eea',\r\n    '--gradient-end': '#764ba2',\r\n    '--shadow': 'rgba(0, 0, 0, 0.1)',\r\n    '--ai-bg': 'linear-gradient(135deg, #f0f4ff 0%, #faf5ff 100%)'\r\n  },\r\n  dark: {\r\n    '--bg-primary': '#1f2937',\r\n    '--bg-secondary': '#111827',\r\n    '--bg-tertiary': '#0f172a',\r\n    '--text-primary': '#f9fafb',\r\n    '--text-secondary': '#e5e7eb',\r\n    '--text-tertiary': '#d1d5db',\r\n    '--border-color': '#374151',\r\n    '--border-light': '#4b5563',\r\n    '--gradient-start': '#667eea',\r\n    '--gradient-end': '#764ba2',\r\n    '--shadow': 'rgba(0, 0, 0, 0.3)',\r\n    '--ai-bg': 'linear-gradient(135deg, #1e293b 0%, #312e81 100%)'\r\n  }\r\n};\r\n\r\n/**\r\n * 应用主题样式（不保存到 storage）\r\n */\r\nfunction applyThemeStyles(themeName) {\r\n  let theme = themeName;\r\n  \r\n  // 如果是 auto，根据系统偏好选择\r\n  if (themeName === 'auto') {\r\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n    theme = prefersDark ? 'dark' : 'light';\r\n  }\r\n  \r\n  const themeColors = THEMES[theme] || THEMES.light;\r\n  \r\n  // 应用 CSS 变量\r\n  const root = document.documentElement;\r\n  Object.entries(themeColors).forEach(([key, value]) => {\r\n    root.style.setProperty(key, value);\r\n  });\r\n  \r\n  // 添加主题类到 body\r\n  document.body.classList.remove('theme-light', 'theme-dark');\r\n  document.body.classList.add(`theme-${theme}`);\r\n}\r\n\r\n/**\r\n * 应用主题并保存\r\n */\r\nasync function applyTheme(themeName, saveToStorage = true) {\r\n  applyThemeStyles(themeName);\r\n  \r\n  // 保存主题设置（可选）\r\n  if (saveToStorage) {\r\n    let theme = themeName;\r\n    if (themeName === 'auto') {\r\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n      theme = prefersDark ? 'dark' : 'light';\r\n    }\r\n    \r\n    try {\r\n      await chrome.storage.local.set({ theme: themeName, appliedTheme: theme });\r\n    } catch (error) {\r\n      console.error('保存主题设置失败:', error);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 加载并应用保存的主题\r\n */\r\nasync function loadSavedTheme() {\r\n  try {\r\n    const { theme } = await chrome.storage.local.get(['theme']);\r\n    const savedTheme = theme || 'light';\r\n    await applyTheme(savedTheme);\r\n  } catch (error) {\r\n    console.error('加载主题失败:', error);\r\n    await applyTheme('light'); // 使用默认主题\r\n  }\r\n}\r\n\r\n/**\r\n * 监听系统主题变化（仅当设置为 auto 时）\r\n */\r\nfunction watchSystemTheme() {\r\n  const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n  \r\n  darkModeQuery.addEventListener('change', async (e) => {\r\n    const { theme } = await chrome.storage.local.get(['theme']);\r\n    if (theme === 'auto') {\r\n      await applyTheme('auto');\r\n    }\r\n  });\r\n}\r\n\r\n// 导出函数\r\nif (typeof window !== 'undefined') {\r\n  window.applyTheme = applyTheme;\r\n  window.applyThemeStyles = applyThemeStyles;\r\n  window.loadSavedTheme = loadSavedTheme;\r\n  window.watchSystemTheme = watchSystemTheme;\r\n}\r\n\r\n"],"names":[],"sourceRoot":""}