# Digest AI 使用指南

## 📦 安装步骤

### 1. 安装依赖

在项目根目录运行：

```bash
npm install
```

### 2. 构建项目

```bash
npm run build
```

这将在 `dist` 目录生成可加载的扩展程序文件。

### 3. 加载到 Chrome

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目的 `dist` 目录

### 4. 准备图标（临时）

在开发阶段，您需要在 `icons/` 目录下放置以下图标文件：
- `icon16.png` (16x16 像素)
- `icon48.png` (48x48 像素)
- `icon128.png` (128x128 像素)

您可以使用任何简单的图标生成工具创建临时图标，或者使用 emoji 截图。

## ⚙️ 首次配置

### 获取 API Key

根据您选择的 AI 模型，获取对应的 API Key：

#### Google Gemini（推荐用于开发）
1. 访问 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 使用 Google 账号登录
3. 创建 API Key
4. Gemini 提供免费额度，适合开发测试

#### OpenAI
1. 访问 [OpenAI Platform](https://platform.openai.com/api-keys)
2. 登录账号
3. 创建 API Key
4. 注意：需要付费使用

#### DeepSeek
1. 访问 [DeepSeek Platform](https://platform.deepseek.com)
2. 注册并登录
3. 创建 API Key

### 配置扩展

1. 点击浏览器工具栏的 Digest AI 图标
2. 点击右上角的设置图标（⚙️）
3. 选择 AI 模型
4. 粘贴 API Key
5. 点击"保存设置"
6. （可选）点击"测试连接"验证

## 📖 使用流程

### 保存文章

1. 浏览到任何包含文章的网页
2. 点击浏览器工具栏的 Digest AI 图标
3. 点击"保存文章"按钮
4. 等待 AI 分析完成（通常需要 5-10 秒）
5. 保存成功后，可以添加标签
6. 点击"在阅读库中查看"查看完整内容

### 管理阅读库

1. 点击扩展图标，选择"查看全部"
2. 或者直接访问 `chrome-extension://[扩展ID]/dashboard.html`

在阅读库中，您可以：
- 🔍 **搜索**：在顶部搜索框输入关键词
- 🏷️ **筛选**：使用标签筛选器
- 👁️ **阅读**：点击文章查看详情
- ➕ **标签管理**：添加或删除标签
- 🗑️ **删除**：删除不需要的文章
- 🔗 **打开原文**：在新标签页打开原始网页

### 阅读体验

文章详情页面采用"三段式"设计：

1. **AI 分析区域**（顶部）
   - 📝 文章摘要：3-5 句话的精炼概括
   - 💡 核心观点：3-5 个要点列表

2. **原文内容区域**（中间）
   - 干净、无干扰的文章正文
   - 保留原文格式和结构

3. **元数据区域**（底部）
   - 来源、保存时间、链接、字数等信息

## 🐛 常见问题

### 扩展无法加载

**问题**：Chrome 提示"清单文件缺失或不可读"

**解决方案**：
1. 确保已运行 `npm run build`
2. 选择 `dist` 目录而不是项目根目录
3. 检查 `dist/manifest.json` 是否存在

### 无法提取文章内容

**问题**：保存时提示"提取内容失败"

**可能原因**：
- 当前网页不是文章页面（如：搜索结果页、列表页）
- 网站使用了特殊的防抓取技术
- 内容是动态加载的

**解决方案**：
- 确保在文章正文页面使用
- 尝试等待页面完全加载后再保存

### API 调用失败

**问题**：保存时提示"AI API 调用失败"

**可能原因**：
- API Key 无效或过期
- 网络连接问题
- API 配额用尽

**解决方案**：
1. 在设置页面重新配置 API Key
2. 点击"测试连接"验证
3. 检查 API 提供商的配额使用情况
4. 检查网络连接

### 文章显示不完整

**问题**：保存的文章内容不完整或格式混乱

**解决方案**：
- 这是内容提取算法的局限性
- 未来版本会改进提取逻辑
- 可以点击"打开原文"查看完整内容

## 🔧 开发模式

### 实时开发

使用以下命令启动开发模式（自动重新构建）：

```bash
npm run dev
```

修改代码后，在 Chrome 扩展管理页面点击"重新加载"图标。

### 调试技巧

1. **查看日志**：
   - 打开 Chrome DevTools（F12）
   - 切换到 Console 标签
   - 查看错误和日志信息

2. **调试 Popup**：
   - 右键点击扩展图标
   - 选择"检查弹出内容"

3. **调试 Background**：
   - 访问 `chrome://extensions/`
   - 找到 Digest AI
   - 点击"Service Worker"

4. **调试 Content Script**：
   - 在任何网页打开 DevTools
   - Content script 的日志会显示在该页面的 Console 中

## 📚 技术栈说明

- **Manifest V3**：Chrome 最新的扩展程序规范
- **Vanilla JavaScript**：无框架依赖，轻量高效
- **Webpack**：模块打包和资源管理
- **Chrome Storage API**：本地数据存储
- **Readability.js**：Mozilla 的内容提取库

## 🚀 下一步

完成基本配置后，您可以：

1. 保存一些测试文章，验证功能
2. 调整设置（主题、字体大小）
3. 为文章添加标签，建立知识体系
4. 尝试搜索和筛选功能

## 💡 提示

- 建议使用 Gemini 进行开发测试（有免费额度）
- 定期备份 Chrome 的扩展数据（目前数据存储在本地）
- 遇到问题可以查看浏览器控制台的错误信息

---

祝使用愉快！如有问题，请查看项目 README 或提交 Issue。

