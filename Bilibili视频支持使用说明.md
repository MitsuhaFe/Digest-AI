# Bilibili 视频支持功能说明

## 📺 功能概述

Digest AI 现已支持 Bilibili 视频内容的智能摘要！您可以像保存普通文章一样，一键保存 Bilibili 视频并生成 AI 摘要。

## ✨ 主要特性

### 1. **自动视频信息提取**
- ✅ 视频标题
- ✅ 视频简介
- ✅ UP主信息
- ✅ 视频时长
- ✅ 发布日期
- ✅ 播放量、点赞数等统计数据
- ✅ 视频标签

### 2. **智能字幕获取**
- ✅ 自动获取视频官方字幕
- ✅ 支持中文简体字幕
- ✅ 字幕转为完整文本
- ✅ 保留时间戳信息
- 📌 如果视频没有字幕，将使用视频简介作为内容

### 3. **AI 智能摘要**
- 🤖 对字幕/简介内容生成摘要
- 📝 提取核心观点
- 🏷️ 自动推荐相关标签
- 💡 支持所有已配置的 AI 模型（Gemini、OpenAI、Claude、DeepSeek、通义千问）

## 🚀 使用方法

### 方法1: 使用浏览器扩展图标

1. 打开任意 Bilibili 视频页面（如：https://www.bilibili.com/video/BV1xx411c7mD）
2. 点击浏览器工具栏的 **Digest AI** 图标
3. 等待视频信息提取和 AI 分析（约5-15秒）
4. 保存成功后，可在阅读库中查看

### 方法2: 使用悬浮球快捷按钮

1. 在 Bilibili 视频页面，右下角会显示悬浮球按钮 📚
2. 直接点击悬浮球即可保存视频
3. 悬浮球可拖动到任意位置

## 📊 保存内容包含

保存的视频内容包括：

```json
{
  "type": "video-bilibili",
  "title": "视频标题",
  "url": "视频链接",
  "source": "UP主名称",
  "content": "字幕全文 或 视频简介",
  "summary": "AI生成的摘要",
  "keyPoints": ["核心观点1", "核心观点2", "核心观点3"],
  "suggestedTags": ["标签1", "标签2"],
  
  "videoMetadata": {
    "duration": 720,              // 时长（秒）
    "author": "UP主名称",
    "cover": "封面图片URL",
    "pubdate": "发布时间",
    "tags": ["视频原标签"],
    "stats": {
      "view": 10000,              // 播放量
      "like": 500                 // 点赞数
    },
    "subtitles": {
      "available": true,           // 是否有字幕
      "fullText": "字幕全文",
      "segments": [/*时间轴字幕片段*/]
    }
  }
}
```

## 🎯 在阅读库中查看

1. 打开 Digest AI 阅读库
2. 视频会显示为特殊卡片，包含：
   - 🎥 视频标识图标
   - UP主信息
   - 视频时长
   - AI 摘要和核心观点
   - 字幕信息（如有）

## ⚙️ 技术实现

### 工作流程

```
1. 检测页面类型
   ↓
2. 提取视频信息（从页面DOM）
   ↓
3. 获取字幕（通过Bilibili API）
   ↓
4. 字幕转文本
   ↓
5. 发送给AI生成摘要
   ↓
6. 保存到本地存储
```

### 核心模块

- **bilibili-adapter.js**: 负责提取 Bilibili 视频信息和字幕
- **content.js**: 检测内容类型并调用相应适配器
- **background.js**: 处理视频内容的保存逻辑

## 🔧 故障排除

### 问题1: 提示"Bilibili适配器未加载"

**解决方法：**
1. 完全关闭并重新打开 Bilibili 页面
2. 确保扩展已正确安装并启用
3. 尝试重新加载扩展（chrome://extensions/）

### 问题2: 无法获取字幕

**原因：** 该视频没有上传字幕

**解决方法：**
- 扩展会自动使用视频简介作为替代内容
- AI 仍可基于简介生成摘要

### 问题3: 保存失败

**可能原因：**
- AI API Key 未配置或无效
- 网络连接问题
- 视频信息获取失败

**解决方法：**
1. 检查设置页面的 API Key 配置
2. 查看浏览器控制台（F12）的错误信息
3. 尝试刷新页面后重新保存

## 🎓 支持的视频类型

目前支持：
- ✅ 普通视频（BV号格式）
- ✅ 旧版AV号视频
- ✅ 单P视频
- 🔜 多P视频（即将支持，目前默认处理第一P）
- 🔜 番剧/电影（即将支持）

## 🌟 最佳实践建议

### 1. **选择有字幕的视频**
有字幕的视频能获得更准确的摘要，因为AI可以分析完整的视频内容。

### 2. **合理使用AI模型**
- 短视频（<10分钟）：使用 Gemini 或 DeepSeek（成本低）
- 长视频（>30分钟）：使用 Claude 或 GPT-4（理解力强）
- 技术类视频：使用 GPT-4 或 Claude（专业性强）

### 3. **标签管理**
- AI 会根据视频内容推荐标签
- 建议结合视频原标签和AI推荐标签
- 可自定义添加更精确的标签

### 4. **定期整理**
- 为视频添加有意义的标签
- 删除不再需要的视频
- 利用搜索功能快速定位内容

## 📈 使用场景

### 学习场景
- 📚 保存技术教程视频的要点
- 🎓 记录在线课程的核心知识
- 💻 收藏编程教学视频的关键步骤

### 知识管理
- 📖 构建个人视频知识库
- 🔍 快速检索视频内容
- 📝 提取视频中的关键信息

### 时间管理
- ⏰ 通过摘要快速了解视频内容
- 🎯 判断是否值得完整观看
- ⚡ 节省80%的内容筛选时间

## 🔮 未来规划

- [ ] 支持 YouTube 视频
- [ ] 支持多P视频的完整处理
- [ ] 添加视频时间轴导航
- [ ] 支持视频片段标注
- [ ] 添加视频笔记功能
- [ ] 支持视频合集批量处理

## 💡 提示与技巧

1. **批量保存**：使用悬浮球可以快速保存多个视频
2. **组合筛选**：在阅读库中可以按类型筛选只看视频内容
3. **搜索功能**：可以搜索视频标题、UP主、字幕内容
4. **导出功能**：视频摘要可以导出为Markdown笔记

## 🐛 反馈与建议

如果您在使用过程中遇到问题或有改进建议，欢迎：

1. 查看浏览器控制台的详细错误信息
2. 检查扩展的设置配置
3. 尝试在不同视频上测试

---

**版本：** V3.0-Beta  
**更新日期：** 2025-10-24  
**开发阶段：** 第四阶段 - 多媒体内容支持

